<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      lang="en">
<head>
    <meta charset="UTF-8">
    <title>마이페이지</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/mypage.css}"/>
    <!--    공통 사용    -->
    <link rel="stylesheet" type="text/css" th:href="@{/css/header.css}"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&display=swap" rel="stylesheet">
    <script defer th:src="@{/js/main.js}"></script>
</head>
<body>
<header th:replace="~{/fragments/header :: header}">
</header>
<h1 class="mypage_title">마이페이지</h1>
    <div class="mypage_menu">
        <div class="mypage_menu1">
            <a th:href="@{/member/info}">나의 정보</a><br>
        </div>
        <div class="mypage_menu1">
            <a th:href="@{/}">내 게시글</a><br>
        </div>
        <div class="mypage_menu1">
            <a th:href="@{/}">내 임시 저장 글</a><br>
        </div>
        <div class="mypage_menu1">
            <a th:href="@{/}">내 댓글</a><br>
        </div>
        <div class="mypage_menu1">
            <a th:href="@{/}">내 추천</a><br>
        </div>
        <div class="mypage_menu1">
        <form th:action="@{/auth/logout}" method="post">
            <button id="logout_button2">로그아웃</button>
        </form>
        </div>
        <div class="mypage_menu1" >
            <button id="deleteButton">회원 탈퇴</button>
        </div>

        <div class="mypage_menu1">
            <a th:href="@{/}">뒤로가기</a><br>
        </div>
    </div>

    <!-- Modal -->
    <div id="confirmationModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <p id="realOut">진짜 탈퇴하시겠습니까?</p>
            <form id="deleteForm" th:action="@{/member/delete}" method="post">
                <button type="submit" id="okButton">예</button>
                <button type="button" id="cancelButton">아니오</button>
            </form>
        </div>
    </div>

    <script>
        // 모달 관련 JavaScript 코드
        const modal = document.getElementById("confirmationModal");
        const deleteButton = document.getElementById("deleteButton");
        const closeButton = document.querySelector(".close");
        const cancelButton = document.getElementById("cancelButton");

        // 회원 탈퇴 버튼 클릭 시 모달 표시
        deleteButton.onclick = function() {
            modal.style.display = "block";
        }

        // 모달 닫기 버튼 클릭 시 모달 숨기기
        closeButton.onclick = function() {
            modal.style.display = "none";
        }

        // 아니오 버튼 클릭 시 모달 숨기기 및 마이페이지로 돌아가기
        cancelButton.onclick = function() {
            modal.style.display = "none";
            // 현재 마이페이지로 리다이렉트
            window.location.href = '/member/mypage';
        }

        // // 모달 바깥을 클릭하면 모달 숨기기
        // window.onclick = function(event) {
        //     if (event.target === modal) {
        //         modal.style.display = "none";
        //     }
        // }
    </script>

</body>
</html>